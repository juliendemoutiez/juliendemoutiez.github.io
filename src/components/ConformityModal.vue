<template>
  <div v-if="show"
    class="h-full w-full bg-slate-800/[.55] cursor-pointer fixed modal-overlay flex items-center justify-center"
    @click="handleClickOutside">
    <div class="modal-container relative z-50 m-6 max-w-4xl bg-white rounded-lg shadow-xl cursor-default">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <p class="font-bold text-2xl text-slate-800">√Ä propos</p>
          <button @click="$emit('close')" class="text-slate-400 hover:text-slate-600 transition-colors">
            <X />
          </button>
        </div>

        <div class="space-y-4 text-slate-800">
          <p>Bienvenue sur la <span class="font-bold">carte interactive de conformit√© num√©rique des collectivit√©s
              territoriales</span>. Celle-ci est d√©velopp√©e par l'ANCT dans le cadre des travaux concernant la Suite
            territoriale.</p>

          <p>
            Elle permet d'identifier les communes fran√ßaises qui ne disposent pas aujourd'hui d'un <span
              class="font-bold">socle de services num√©riques essentiels</span> pour assurer leur communication en
            ligne de
            mani√®re s√©curis√©e, selon quatre crit√®res :
          </p>

          <ul class="list-disc ml-6 space-y-2">
            <li><span class="font-bold">Un nom de domaine institutionnel</span> et le recours √† une extension (TLD)
              conforme (.fr, .bzh, .corsica, .re, .alsace, .aquitaine, .eus) qui permettent de les identifier
              formellement
              dans leurs communications en ligne</li>
            <li><span class="font-bold">La propri√©t√© de ce nom de domaine</span> avec un nom de domaine directement
              enregistr√© au nom de la collectivit√© (et non d'un prestataire ou d'un agent) qui garantit la p√©rennit√©
              des
              services et la ma√Ætrise de l'identit√© num√©rique de la commune</li>
            <li><span class="font-bold">Un site internet officiel</span> d√©ploy√© sur ce nom de domaine et disposant du
              protocole d'acc√®s s√©curis√© HTTPS qui garantit la confidentialit√© et l'int√©grit√© des donn√©es √©chang√©es
            </li>
            <li><span class="font-bold">Une adresse de messagerie √©lectronique</span> officielle rattach√©e √† ce nom de
              domaine</li>
          </ul>



          <p>
            Cette cartographie repose sur les <span class="font-bold">donn√©es officielles et ouvertes de <a
                class="text-blue-500 hover:text-blue-600 font-bold" target="_blank"
                href="https://lannuaire.service-public.fr/navigation/mairie">l'Annuaire du service public</a>
              maintenues par la Direction de l‚ÄôInformation L√©gale et Administrative (DILA)</span>. Ces donn√©es sont
            <span class="font-bold">d√©claratives</span> et peuvent √™tre mises √† jour par tout acteur public. Elles sont
            par ailleurs enrichies par l‚ÄôANCT et les OPSN partenaires.
          </p>

          <p>Le code couleur refl√®te le niveau global de conformit√© :</p>
          <ul class="list-none bg-slate-100 p-4 rounded-lg space-y-2 font-mono text-sm">
            <li>üü¢ <span class="font-bold">Vert</span> : La commune remplit les 4 crit√®res susmentionn√©es</li>
            <li>üü° <span class="font-bold">Jaune</span> : La commune dispose d'une messagerie conforme mais ne remplit
              pas au moins l'un des autres crit√®res susmentionn√©s</li>
            <li>üü† <span class="font-bold">Orange</span> : La commune ne dispose pas d'une messagerie conforme mais
              remplit au moins l'un des autres crit√®res susmentionn√©s</li>
            <li>üî¥ <span class="font-bold">Rouge</span> : La commune ne remplit aucun des crit√®res susmentionn√©s</li>
          </ul>

          <p class="font-bold text-xl mt-6">Comment explorer les donn√©es ?</p>
          <ul class="list-disc ml-6 space-y-2">
            <li>Visualisez la situation globale par r√©gion en consultant les statistiques globales</li>
            <li>Cliquez sur une r√©gion pour afficher le d√©tail par d√©partement</li>
            <li>S√©lectionnez un d√©partement pour explorer les scores individuels des communes</li>
            <li>Pour chaque commune, consultez le d√©tail des quatre crit√®res et acc√©dez √† <a class="text-blue-500"
                target="_blank" href="https://lannuaire.service-public.fr/navigation/mairie">l‚ÄôAnnuaire du service
                public</a> pour demander une mise √† jour.</li>
          </ul>

          <p class="mt-6">Cette cartographie s'inscrit dans le cadre du volet cyber du plan France 2030, destin√© √†
            √©lever le niveau de
            s√©curit√© num√©rique des administrations publiques fran√ßaises.</p>

          <p>Aidez-nous √† l'am√©liorer en √©crivant √† <a class="text-blue-500 hover:text-blue-600"
              href="mailto:suiteterritoriale@anct.gouv.fr">suiteterritoriale@anct.gouv.fr</a> !</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { X } from 'lucide-vue-next';

const props = defineProps({
  show: {
    type: Boolean,
    required: true
  }
});

const emit = defineEmits(['close']);

// Handle click outside
const handleClickOutside = (e) => {
  if (e.target.classList.contains('modal-overlay')) {
    emit('close');
  }
};

</script>

<style scoped>
.modal-overlay {
  z-index: 1099;
  top: 0;
}

.modal-container {
  z-index: 1100;
  top: 0;
  max-height: 90%;
  overflow: auto;
}
</style>